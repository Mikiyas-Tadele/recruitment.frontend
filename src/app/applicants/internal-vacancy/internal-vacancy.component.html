<div class="spacehlder" style="margin-top: 5%;"></div>
<div *ngIf="employeeinfo" class="row" style="margin-left:2px;">
   <h5 style="color:#CD9934"><i>{{employeeinfo.name}},&nbsp;&nbsp;{{employeeinfo.position.replace('.', ' of ')}}</i></h5>
</div>
<div *ngIf="applies.length>0">
    <div style="display: flex; justify-content: center"><h5> Positions Selected</h5></div>
  <div style="display: flex; justify-content: center" *ngFor="let item of applies">
     <h6 style="color:red">Position: {{item.position}},&nbsp;&nbsp;{{fileName(item)}}</h6>
  </div>
</div>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle" width="425"></p-confirmDialog>
<p-toast [style]="{marginTop: '100px'}"></p-toast>
<div class="spacehlder"></div>
<p-panel header="Search Panel" [toggleable]="true">
    <div class="row">
        <div class="col-sm-6">
            <p-dropdown [options]="vps" [showClear]="true" [(ngModel)]="selectedVp" [filter]="true" placeholder="Select Cluster" (onChange)="fillDirector($event)"></p-dropdown>
        </div>
        <div class="col-sm-6">
            <p-dropdown [options]="directorates" [showClear]="true"  [(ngModel)]="selectedDirectorate" [filter]="true" placeholder="Select Directorate" (onChange)="fillDDirector($event)"></p-dropdown>
        </div>
    </div><br> 
       <div class="row">
        <div class="col-sm-6">
            <p-dropdown [options]="ddirectorates"  [showClear]="true" [(ngModel)]="selectedDDirectorate" [filter]="true" 
            placeholder="Select Deputy Directorate" (onChange)="fillManager($event)"></p-dropdown>
        </div>
        <div class="col-sm-6">
            <button type="button" class="btn btn-success btn-round" (click)="resetFilter()">Reset Filter</button><br>
            <!-- <p-dropdown [options]="managers" [(ngModel)]="selectedManager" [filter]="true" placeholder="Select Manager"></p-dropdown> -->
        </div>
        </div><br>

</p-panel>
<br>
<p-dataView [value]="vacancies" [paginator]="true" [rows]="6" #dv filterBy="position"  
  paginatorPosition="both" emptyMessage="No Vacancy Available!">
        <p-header>
            <input type="search" pInputText placeholder="Search by title" (keyup)="dv.filter($event.target.value, 'contains')">&nbsp;&nbsp;
            <button type="button" class="btn btn-danger btn-round" (click)="submit()" style="float: right;">Submit Application</button><br>
        </p-header>
        <div class="row">
    <ng-template let-vacancy pTemplate="listItem">
       
            <div class="col-lg-6">
           
                <div class="card card-default mb-3">
                    <div class="card-header">
                        <h4 class="text-success"><i class="fa fa-bell fa-fw text-success"></i> {{vacancy.position}}</h4>
                    </div>
                    <div class="card-body">
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">{{vacancy.qualifications}}</h5>
                                <p><small class="text-muted"><i class="fa fa-clock-o"></i>2 days left</small>
                                </p>
                            </div>
                            <div class="timeline-body">
                                <p>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <p-fileUpload  #form mode="basic"  accept=".doc, .docx, .pdf"  maxFileSize="20000" 
                        (uploadHandler)="upload($event,form,vacancy)" customUpload="true"
                         [auto]="true" chooseLabel="Attach File" (onSelect)="validateFileSize($event, form.maxFileSize)"></p-fileUpload>&nbsp;&nbsp;&nbsp;
                        <button class="btn btn-sm btn-primary" (click)="apply(vacancy)" style="margin-bottom: 1.8em;">{{isApplied(vacancy)?'Applied':'Apply'}}</button>&nbsp;&nbsp;&nbsp;
                        <button class="btn btn-sm btn-primary" (click)="cancel(vacancy)" style="margin-bottom:1.8em;">Cancel</button>
                    </div>
                </div>
            </div>
        
    </ng-template>
</div>
</p-dataView>
